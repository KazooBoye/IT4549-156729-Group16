{"ast":null,"code":"import _objectSpread from\"D:/GITHUB/IT4549-156729-Group16/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useContext}from'react';import axios from'axios';import{Link}from'react-router-dom';import AuthContext from'../../contexts/AuthContext';// You will need a modal component or create a simple one\n// import Modal from '../../components/Common/Modal'; \nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const UserManagementPage=()=>{const[users,setUsers]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState('');const auth=useContext(AuthContext);// State for managing add/edit form/modal\nconst[isFormVisible,setIsFormVisible]=useState(false);const[isEditing,setIsEditing]=useState(false);const[currentUser,setCurrentUser]=useState(null);// The user being edited\nconst[formData,setFormData]=useState({fullName:'',email:'',password:'',confirmPassword:'',role:'member',phoneNumber:''});const fetchUsers=async()=>{if(!auth||!auth.token)return;setIsLoading(true);try{const config={headers:{Authorization:\"Bearer \".concat(auth.token)}};const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/users\"),config);setUsers(res.data);}catch(err){setError('Không thể tải danh sách người dùng.');}finally{setIsLoading(false);}};useEffect(()=>{fetchUsers();},[auth]);const handleOpenForm=function(){let user=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;if(user){var _user$Profile,_user$Profile2;// Editing existing user\nsetIsEditing(true);setCurrentUser(user);setFormData({fullName:((_user$Profile=user.Profile)===null||_user$Profile===void 0?void 0:_user$Profile.full_name)||'',email:user.email,role:user.role,phoneNumber:((_user$Profile2=user.Profile)===null||_user$Profile2===void 0?void 0:_user$Profile2.phone_number)||'',password:'',// Password fields are always cleared for security\nconfirmPassword:''});}else{// Adding new user\nsetIsEditing(false);setCurrentUser(null);setFormData({fullName:'',email:'',password:'',confirmPassword:'',role:'member',phoneNumber:''});}setIsFormVisible(true);};const handleFormChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleFormSubmit=async e=>{e.preventDefault();if(!isEditing&&formData.password!==formData.confirmPassword){return alert(\"Passwords do not match!\");}try{const config={headers:{Authorization:\"Bearer \".concat(auth.token)}};if(isEditing){// Update logic\nawait axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(currentUser.user_id),formData,config);alert('User updated successfully!');}else{// Create logic\nawait axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/users\"),formData,config);alert('User created successfully!');}setIsFormVisible(false);fetchUsers();// Refresh the list\n}catch(err){var _err$response,_err$response$data;alert(((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'An error occurred.');}};const handleResetPassword=async userId=>{if(window.confirm('Bạn có chắc chắn muốn đặt lại mật khẩu cho người dùng này? Mật khẩu mới sẽ được tạo ngẫu nhiên.')){try{const config={headers:{Authorization:\"Bearer \".concat(auth.token)}};// We send an empty object {} in the body for the PUT request\nconst res=await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(userId,\"/reset-password\"),{},config);// Show the new password to the owner so they can provide it to the user\nalert(\"\\u0110\\u1EB7t l\\u1EA1i m\\u1EADt kh\\u1EA9u th\\xE0nh c\\xF4ng! M\\u1EADt kh\\u1EA9u m\\u1EDBi l\\xE0: \".concat(res.data.newPassword,\"\\n\\nVui l\\xF2ng cung c\\u1EA5p m\\u1EADt kh\\u1EA9u n\\xE0y cho ng\\u01B0\\u1EDDi d\\xF9ng.\"));}catch(err){var _err$response2,_err$response2$data;alert('Đặt lại mật khẩu thất bại.');console.error(\"Password reset error:\",((_err$response2=err.response)===null||_err$response2===void 0?void 0:(_err$response2$data=_err$response2.data)===null||_err$response2$data===void 0?void 0:_err$response2$data.msg)||err);}}};const handleDeleteUser=async userId=>{if(window.confirm('CẢNH BÁO: Bạn có chắc chắn muốn xóa vĩnh viễn người dùng này? Tất cả dữ liệu liên quan (hồ sơ, gói tập, lịch sử) cũng sẽ bị xóa.')){try{const config={headers:{Authorization:\"Bearer \".concat(auth.token)}};await axios.delete(\"\".concat(process.env.REACT_APP_API_URL,\"/users/\").concat(userId),config);alert('Xóa người dùng thành công!');fetchUsers();// Refresh the user list\n}catch(err){var _err$response3,_err$response3$data;alert('Xóa người dùng thất bại.');console.error(\"Delete user error:\",((_err$response3=err.response)===null||_err$response3===void 0?void 0:(_err$response3$data=_err$response3.data)===null||_err$response3$data===void 0?void 0:_err$response3$data.msg)||err);}}};if(isLoading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0110ang t\\u1EA3i...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error});// This is the new, corrected render logic\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"management-page-container\",children:[isFormVisible&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"h2\",{children:isEditing?'Chỉnh sửa Người dùng':'Thêm Người dùng mới'}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"H\\u1ECD t\\xEAn:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"fullName\",value:formData.fullName,onChange:handleFormChange,placeholder:\"Full Name\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"email\",type:\"email\",value:formData.email,onChange:handleFormChange,placeholder:\"Email\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i (t\\xF9y ch\\u1ECDn):\"}),/*#__PURE__*/_jsx(\"input\",{name:\"phoneNumber\",type:\"tel\",value:formData.phoneNumber,onChange:handleFormChange,placeholder:\"Phone Number\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Vai tr\\xF2:\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"role\",value:formData.role,onChange:handleFormChange,children:[/*#__PURE__*/_jsx(\"option\",{value:\"member\",children:\"Member\"}),/*#__PURE__*/_jsx(\"option\",{value:\"trainer\",children:\"Trainer\"}),/*#__PURE__*/_jsx(\"option\",{value:\"staff\",children:\"Staff\"}),/*#__PURE__*/_jsx(\"option\",{value:\"owner\",children:\"Owner\"})]})]}),!isEditing&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"M\\u1EADt kh\\u1EA9u:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"password\",type:\"password\",value:formData.password,onChange:handleFormChange,placeholder:\"Password\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"X\\xE1c nh\\u1EADn M\\u1EADt kh\\u1EA9u:\"}),/*#__PURE__*/_jsx(\"input\",{name:\"confirmPassword\",type:\"password\",value:formData.confirmPassword,onChange:handleFormChange,placeholder:\"Confirm Password\",required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn-secondary\",onClick:()=>setIsFormVisible(false),children:\"H\\u1EE7y b\\u1ECF\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn-primary\",children:isEditing?'Cập nhật':'Tạo Người dùng'})]})]})]})}),/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"btn-back-dashboard\",children:\"\\u2190 Quay l\\u1EA1i Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Qu\\u1EA3n l\\xFD Ng\\u01B0\\u1EDDi d\\xF9ng H\\u1EC7 th\\u1ED1ng\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-add-new\",onClick:()=>handleOpenForm(),children:\"Th\\xEAm Ng\\u01B0\\u1EDDi d\\xF9ng m\\u1EDBi\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"table-wrapper\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"data-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"T\\xEAn\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Vai tr\\xF2\"}),/*#__PURE__*/_jsx(\"th\",{children:\"H\\xE0nh \\u0111\\u1ED9ng\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.length>0?users.map(user=>{var _user$Profile3;return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.user_id}),/*#__PURE__*/_jsx(\"td\",{children:((_user$Profile3=user.Profile)===null||_user$Profile3===void 0?void 0:_user$Profile3.full_name)||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat(user.role),children:user.role})}),/*#__PURE__*/_jsxs(\"td\",{className:\"action-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn-edit\",onClick:()=>handleOpenForm(user),children:\"S\\u1EEDa\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-action btn-missed\",onClick:()=>handleResetPassword(user.user_id),children:\"Reset Pass\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-delete\",onClick:()=>handleDeleteUser(user.user_id),children:\"X\\xF3a\"})]})]},user.user_id);}):/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{colSpan:\"5\",className:\"no-data-cell\",children:\"Kh\\xF4ng c\\xF3 ng\\u01B0\\u1EDDi d\\xF9ng n\\xE0o trong h\\u1EC7 th\\u1ED1ng.\"})})})]})})]});};export default UserManagementPage;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","Link","AuthContext","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","UserManagementPage","users","setUsers","isLoading","setIsLoading","error","setError","auth","isFormVisible","setIsFormVisible","isEditing","setIsEditing","currentUser","setCurrentUser","formData","setFormData","fullName","email","password","confirmPassword","role","phoneNumber","fetchUsers","token","config","headers","Authorization","concat","res","get","process","env","REACT_APP_API_URL","data","err","handleOpenForm","user","arguments","length","undefined","_user$Profile","_user$Profile2","Profile","full_name","phone_number","handleFormChange","e","_objectSpread","target","name","value","handleFormSubmit","preventDefault","alert","put","user_id","post","_err$response","_err$response$data","response","msg","handleResetPassword","userId","window","confirm","newPassword","_err$response2","_err$response2$data","console","handleDeleteUser","delete","_err$response3","_err$response3$data","children","style","color","className","onSubmit","onChange","placeholder","required","type","onClick","to","map","_user$Profile3","colSpan"],"sources":["D:/GITHUB/IT4549-156729-Group16/frontend/src/pages/Owner/UserManagementPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthContext from '../../contexts/AuthContext';\r\n// You will need a modal component or create a simple one\r\n// import Modal from '../../components/Common/Modal'; \r\n\r\nconst UserManagementPage = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const  auth  = useContext(AuthContext);\r\n\r\n    // State for managing add/edit form/modal\r\n    const [isFormVisible, setIsFormVisible] = useState(false);\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [currentUser, setCurrentUser] = useState(null); // The user being edited\r\n    const [formData, setFormData] = useState({\r\n        fullName: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        role: 'member',\r\n        phoneNumber: ''\r\n    });\r\n\r\n    const fetchUsers = async () => {\r\n        if (!auth || !auth.token) return;\r\n        setIsLoading(true);\r\n        try {\r\n            const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/users`, config);\r\n            setUsers(res.data);\r\n        } catch (err) {\r\n            setError('Không thể tải danh sách người dùng.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n    }, [auth]);\r\n\r\n    const handleOpenForm = (user = null) => {\r\n        if (user) { // Editing existing user\r\n            setIsEditing(true);\r\n            setCurrentUser(user);\r\n            setFormData({\r\n                fullName: user.Profile?.full_name || '',\r\n                email: user.email,\r\n                role: user.role,\r\n                phoneNumber: user.Profile?.phone_number || '',\r\n                password: '', // Password fields are always cleared for security\r\n                confirmPassword: ''\r\n            });\r\n        } else { // Adding new user\r\n            setIsEditing(false);\r\n            setCurrentUser(null);\r\n            setFormData({ fullName: '', email: '', password: '', confirmPassword: '', role: 'member', phoneNumber: ''});\r\n        }\r\n        setIsFormVisible(true);\r\n    };\r\n\r\n    const handleFormChange = (e) => {\r\n        setFormData({...formData, [e.target.name]: e.target.value});\r\n    };\r\n\r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!isEditing && formData.password !== formData.confirmPassword) {\r\n            return alert(\"Passwords do not match!\");\r\n        }\r\n        \r\n        try {\r\n            const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n            if (isEditing) { // Update logic\r\n                await axios.put(`${process.env.REACT_APP_API_URL}/users/${currentUser.user_id}`, formData, config);\r\n                alert('User updated successfully!');\r\n            } else { // Create logic\r\n                await axios.post(`${process.env.REACT_APP_API_URL}/users`, formData, config);\r\n                alert('User created successfully!');\r\n            }\r\n            setIsFormVisible(false);\r\n            fetchUsers(); // Refresh the list\r\n        } catch (err) {\r\n            alert(err.response?.data?.msg || 'An error occurred.');\r\n        }\r\n    };\r\n\r\n    const handleResetPassword = async (userId) => {\r\n        if (window.confirm('Bạn có chắc chắn muốn đặt lại mật khẩu cho người dùng này? Mật khẩu mới sẽ được tạo ngẫu nhiên.')) {\r\n            try {\r\n                const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n                // We send an empty object {} in the body for the PUT request\r\n                const res = await axios.put(`${process.env.REACT_APP_API_URL}/users/${userId}/reset-password`, {}, config);\r\n                \r\n                // Show the new password to the owner so they can provide it to the user\r\n                alert(`Đặt lại mật khẩu thành công! Mật khẩu mới là: ${res.data.newPassword}\\n\\nVui lòng cung cấp mật khẩu này cho người dùng.`);\r\n            } catch (err) {\r\n                alert('Đặt lại mật khẩu thất bại.');\r\n                console.error(\"Password reset error:\", err.response?.data?.msg || err);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDeleteUser = async (userId) => {\r\n        if (window.confirm('CẢNH BÁO: Bạn có chắc chắn muốn xóa vĩnh viễn người dùng này? Tất cả dữ liệu liên quan (hồ sơ, gói tập, lịch sử) cũng sẽ bị xóa.')) {\r\n            try {\r\n                const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n                await axios.delete(`${process.env.REACT_APP_API_URL}/users/${userId}`, config);\r\n                \r\n                alert('Xóa người dùng thành công!');\r\n                fetchUsers(); // Refresh the user list\r\n            } catch (err) {\r\n                alert('Xóa người dùng thất bại.');\r\n                console.error(\"Delete user error:\", err.response?.data?.msg || err);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n     if (isLoading) return <p>Đang tải...</p>;\r\n  if (error) return <p style={{color: 'red'}}>{error}</p>;\r\n\r\n  // This is the new, corrected render logic\r\n  return (\r\n    <div className=\"management-page-container\">\r\n      {/* The modal for adding/editing will be controlled by this state */}\r\n      {isFormVisible && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal-content\">\r\n            <h2>{isEditing ? 'Chỉnh sửa Người dùng' : 'Thêm Người dùng mới'}</h2>\r\n            <form onSubmit={handleFormSubmit}>\r\n              <div className=\"form-group\">\r\n                <label>Họ tên:</label>\r\n                <input name=\"fullName\" value={formData.fullName} onChange={handleFormChange} placeholder=\"Full Name\" required />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Email:</label>\r\n                <input name=\"email\" type=\"email\" value={formData.email} onChange={handleFormChange} placeholder=\"Email\" required />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Số điện thoại (tùy chọn):</label>\r\n                <input name=\"phoneNumber\" type=\"tel\" value={formData.phoneNumber} onChange={handleFormChange} placeholder=\"Phone Number\" />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Vai trò:</label>\r\n                <select name=\"role\" value={formData.role} onChange={handleFormChange}>\r\n                  <option value=\"member\">Member</option>\r\n                  <option value=\"trainer\">Trainer</option>\r\n                  <option value=\"staff\">Staff</option>\r\n                  <option value=\"owner\">Owner</option>\r\n                </select>\r\n              </div>\r\n              {!isEditing && (\r\n                <>\r\n                  <div className=\"form-group\">\r\n                    <label>Mật khẩu:</label>\r\n                    <input name=\"password\" type=\"password\" value={formData.password} onChange={handleFormChange} placeholder=\"Password\" required />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Xác nhận Mật khẩu:</label>\r\n                    <input name=\"confirmPassword\" type=\"password\" value={formData.confirmPassword} onChange={handleFormChange} placeholder=\"Confirm Password\" required />\r\n                  </div>\r\n                </>\r\n              )}\r\n              <div className=\"modal-actions\">\r\n                <button type=\"button\" className=\"btn-secondary\" onClick={() => setIsFormVisible(false)}>Hủy bỏ</button>\r\n                <button type=\"submit\" className=\"btn-primary\">{isEditing ? 'Cập nhật' : 'Tạo Người dùng'}</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Page Content */}\r\n      <Link to=\"/dashboard\" className=\"btn-back-dashboard\">← Quay lại Dashboard</Link>\r\n      <div className=\"page-header\">\r\n        <h2>Quản lý Người dùng Hệ thống</h2>\r\n        <button className=\"btn-add-new\" onClick={() => handleOpenForm()}>Thêm Người dùng mới</button>\r\n      </div>\r\n      <div className=\"table-wrapper\">\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Tên</th>\r\n              <th>Email</th>\r\n              <th>Vai trò</th>\r\n              <th>Hành động</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users.length > 0 ? (\r\n              users.map(user => (\r\n                <tr key={user.user_id}>\r\n                  <td>{user.user_id}</td>\r\n                  {/* FIX: Correctly access nested Profile data with optional chaining */}\r\n                  <td>{user.Profile?.full_name || 'N/A'}</td>\r\n                  <td>{user.email}</td>\r\n                  <td>\r\n                    {/* Use a styled badge for the role */}\r\n                    <span className={`status-badge status-${user.role}`}>{user.role}</span>\r\n                  </td>\r\n                  <td className=\"action-buttons\">\r\n                    <button className=\"btn-edit\" onClick={() => handleOpenForm(user)}>Sửa</button>\r\n                    <button className=\"btn-action btn-missed\" onClick={() => handleResetPassword(user.user_id)}>Reset Pass</button>\r\n                    <button className=\"btn-delete\" onClick={() => handleDeleteUser(user.user_id)}>Xóa</button>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"no-data-cell\">Không có người dùng nào trong hệ thống.</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagementPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}