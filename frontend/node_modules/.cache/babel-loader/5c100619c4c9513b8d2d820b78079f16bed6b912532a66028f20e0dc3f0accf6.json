{"ast":null,"code":"import React,{useState}from'react';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SimulatedPaymentForm=_ref=>{let{packageId,packagePrice,onPaymentSuccess,onPaymentError}=_ref;const[processing,setProcessing]=useState(false);const[error,setError]=useState(null);const[success,setSuccess]=useState(null);const[shouldSucceed,setShouldSucceed]=useState(true);// Checkbox to control outcome\nconst handleSubmit=async event=>{event.preventDefault();setProcessing(true);setError(null);setSuccess(null);try{const token=localStorage.getItem('token');// Your auth token\nconst response=await axios.post(\"\".concat(process.env.REACT_APP_API_URL,\"/payments/simulate\"),{packageId,shouldSucceed},{headers:{Authorization:\"Bearer \".concat(token)}});// Handle successful response from the backend\nsetSuccess(response.data.msg);if(onPaymentSuccess){onPaymentSuccess(response.data);}}catch(err){var _err$response,_err$response$data;// Handle error response from the backend (e.g., status 402 for failed payment)\nconst errorMessage=((_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.msg)||'An unexpected error occurred.';setError(errorMessage);if(onPaymentError){onPaymentError(errorMessage);}}finally{setProcessing(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{border:'1px solid #ccc',padding:'20px',borderRadius:'8px'},children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Simulated Payment\"}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Paying \",packagePrice,\"VND for Package ID: \",packageId]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Card Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"**** **** **** 4242\",style:{width:'100%',margin:'5px 0'}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"CVV\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"123\",style:{width:'100px',margin:'5px 0'}})]}),/*#__PURE__*/_jsxs(\"div\",{style:{margin:'15px 0'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:\"simulateSuccess\",checked:shouldSucceed,onChange:e=>setShouldSucceed(e.target.checked)}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"simulateSuccess\",children:\" Simulate a Successful Transaction\"})]}),success&&/*#__PURE__*/_jsx(\"div\",{style:{color:'green',margin:'10px 0'},children:success}),error&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red',margin:'10px 0'},children:error}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:processing,children:processing?'Processing...':\"Pay $\".concat(packagePrice)})]})]});};export default SimulatedPaymentForm;","map":{"version":3,"names":["React","useState","axios","jsx","_jsx","jsxs","_jsxs","SimulatedPaymentForm","_ref","packageId","packagePrice","onPaymentSuccess","onPaymentError","processing","setProcessing","error","setError","success","setSuccess","shouldSucceed","setShouldSucceed","handleSubmit","event","preventDefault","token","localStorage","getItem","response","post","concat","process","env","REACT_APP_API_URL","headers","Authorization","data","msg","err","_err$response","_err$response$data","errorMessage","style","border","padding","borderRadius","children","onSubmit","type","placeholder","width","margin","id","checked","onChange","e","target","htmlFor","color","disabled"],"sources":["D:/GITHUB/IT4549-156729-Group16/frontend/src/pages/Member/SimulatedPaymentForm.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst SimulatedPaymentForm = ({ packageId, packagePrice, onPaymentSuccess, onPaymentError }) => {\r\n  const [processing, setProcessing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [shouldSucceed, setShouldSucceed] = useState(true); // Checkbox to control outcome\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setProcessing(true);\r\n    setError(null);\r\n    setSuccess(null);\r\n\r\n    try {\r\n      const token = localStorage.getItem('token'); // Your auth token\r\n      const response = await axios.post(\r\n        `${process.env.REACT_APP_API_URL}/payments/simulate`,\r\n        {\r\n          packageId,\r\n          shouldSucceed,\r\n        },\r\n        {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        }\r\n      );\r\n\r\n      // Handle successful response from the backend\r\n      setSuccess(response.data.msg);\r\n      if (onPaymentSuccess) {\r\n        onPaymentSuccess(response.data);\r\n      }\r\n    } catch (err) {\r\n      // Handle error response from the backend (e.g., status 402 for failed payment)\r\n      const errorMessage = err.response?.data?.msg || 'An unexpected error occurred.';\r\n      setError(errorMessage);\r\n      if (onPaymentError) {\r\n        onPaymentError(errorMessage);\r\n      }\r\n    } finally {\r\n      setProcessing(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{ border: '1px solid #ccc', padding: '20px', borderRadius: '8px' }}>\r\n      <h3>Simulated Payment</h3>\r\n      <p>Paying {packagePrice}VND for Package ID: {packageId}</p>\r\n      <form onSubmit={handleSubmit}>\r\n        {/* These fields are purely for visual effect */}\r\n        <div>\r\n          <label>Card Number</label>\r\n          <input type=\"text\" placeholder=\"**** **** **** 4242\" style={{ width: '100%', margin: '5px 0' }} />\r\n        </div>\r\n        <div>\r\n          <label>CVV</label>\r\n          <input type=\"text\" placeholder=\"123\" style={{ width: '100px', margin: '5px 0' }} />\r\n        </div>\r\n\r\n        <div style={{ margin: '15px 0' }}>\r\n          <input\r\n            type=\"checkbox\"\r\n            id=\"simulateSuccess\"\r\n            checked={shouldSucceed}\r\n            onChange={(e) => setShouldSucceed(e.target.checked)}\r\n          />\r\n          <label htmlFor=\"simulateSuccess\"> Simulate a Successful Transaction</label>\r\n        </div>\r\n\r\n        {success && <div style={{ color: 'green', margin: '10px 0' }}>{success}</div>}\r\n        {error && <div style={{ color: 'red', margin: '10px 0' }}>{error}</div>}\r\n\r\n        <button type=\"submit\" disabled={processing}>\r\n          {processing ? 'Processing...' : `Pay $${packagePrice}`}\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SimulatedPaymentForm;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE1B,KAAM,CAAAC,oBAAoB,CAAGC,IAAA,EAAmE,IAAlE,CAAEC,SAAS,CAAEC,YAAY,CAAEC,gBAAgB,CAAEC,cAAe,CAAC,CAAAJ,IAAA,CACzF,KAAM,CAACK,UAAU,CAAEC,aAAa,CAAC,CAAGb,QAAQ,CAAC,KAAK,CAAC,CACnD,KAAM,CAACc,KAAK,CAAEC,QAAQ,CAAC,CAAGf,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAACgB,OAAO,CAAEC,UAAU,CAAC,CAAGjB,QAAQ,CAAC,IAAI,CAAC,CAC5C,KAAM,CAACkB,aAAa,CAAEC,gBAAgB,CAAC,CAAGnB,QAAQ,CAAC,IAAI,CAAC,CAAE;AAE1D,KAAM,CAAAoB,YAAY,CAAG,KAAO,CAAAC,KAAK,EAAK,CACpCA,KAAK,CAACC,cAAc,CAAC,CAAC,CACtBT,aAAa,CAAC,IAAI,CAAC,CACnBE,QAAQ,CAAC,IAAI,CAAC,CACdE,UAAU,CAAC,IAAI,CAAC,CAEhB,GAAI,CACF,KAAM,CAAAM,KAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAE;AAC7C,KAAM,CAAAC,QAAQ,CAAG,KAAM,CAAAzB,KAAK,CAAC0B,IAAI,IAAAC,MAAA,CAC5BC,OAAO,CAACC,GAAG,CAACC,iBAAiB,uBAChC,CACEvB,SAAS,CACTU,aACF,CAAC,CACD,CACEc,OAAO,CAAE,CAAEC,aAAa,WAAAL,MAAA,CAAYL,KAAK,CAAG,CAC9C,CACF,CAAC,CAED;AACAN,UAAU,CAACS,QAAQ,CAACQ,IAAI,CAACC,GAAG,CAAC,CAC7B,GAAIzB,gBAAgB,CAAE,CACpBA,gBAAgB,CAACgB,QAAQ,CAACQ,IAAI,CAAC,CACjC,CACF,CAAE,MAAOE,GAAG,CAAE,KAAAC,aAAA,CAAAC,kBAAA,CACZ;AACA,KAAM,CAAAC,YAAY,CAAG,EAAAF,aAAA,CAAAD,GAAG,CAACV,QAAQ,UAAAW,aAAA,kBAAAC,kBAAA,CAAZD,aAAA,CAAcH,IAAI,UAAAI,kBAAA,iBAAlBA,kBAAA,CAAoBH,GAAG,GAAI,+BAA+B,CAC/EpB,QAAQ,CAACwB,YAAY,CAAC,CACtB,GAAI5B,cAAc,CAAE,CAClBA,cAAc,CAAC4B,YAAY,CAAC,CAC9B,CACF,CAAC,OAAS,CACR1B,aAAa,CAAC,KAAK,CAAC,CACtB,CACF,CAAC,CAED,mBACER,KAAA,QAAKmC,KAAK,CAAE,CAAEC,MAAM,CAAE,gBAAgB,CAAEC,OAAO,CAAE,MAAM,CAAEC,YAAY,CAAE,KAAM,CAAE,CAAAC,QAAA,eAC7EzC,IAAA,OAAAyC,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BvC,KAAA,MAAAuC,QAAA,EAAG,SAAO,CAACnC,YAAY,CAAC,sBAAoB,CAACD,SAAS,EAAI,CAAC,cAC3DH,KAAA,SAAMwC,QAAQ,CAAEzB,YAAa,CAAAwB,QAAA,eAE3BvC,KAAA,QAAAuC,QAAA,eACEzC,IAAA,UAAAyC,QAAA,CAAO,aAAW,CAAO,CAAC,cAC1BzC,IAAA,UAAO2C,IAAI,CAAC,MAAM,CAACC,WAAW,CAAC,qBAAqB,CAACP,KAAK,CAAE,CAAEQ,KAAK,CAAE,MAAM,CAAEC,MAAM,CAAE,OAAQ,CAAE,CAAE,CAAC,EAC/F,CAAC,cACN5C,KAAA,QAAAuC,QAAA,eACEzC,IAAA,UAAAyC,QAAA,CAAO,KAAG,CAAO,CAAC,cAClBzC,IAAA,UAAO2C,IAAI,CAAC,MAAM,CAACC,WAAW,CAAC,KAAK,CAACP,KAAK,CAAE,CAAEQ,KAAK,CAAE,OAAO,CAAEC,MAAM,CAAE,OAAQ,CAAE,CAAE,CAAC,EAChF,CAAC,cAEN5C,KAAA,QAAKmC,KAAK,CAAE,CAAES,MAAM,CAAE,QAAS,CAAE,CAAAL,QAAA,eAC/BzC,IAAA,UACE2C,IAAI,CAAC,UAAU,CACfI,EAAE,CAAC,iBAAiB,CACpBC,OAAO,CAAEjC,aAAc,CACvBkC,QAAQ,CAAGC,CAAC,EAAKlC,gBAAgB,CAACkC,CAAC,CAACC,MAAM,CAACH,OAAO,CAAE,CACrD,CAAC,cACFhD,IAAA,UAAOoD,OAAO,CAAC,iBAAiB,CAAAX,QAAA,CAAC,oCAAkC,CAAO,CAAC,EACxE,CAAC,CAEL5B,OAAO,eAAIb,IAAA,QAAKqC,KAAK,CAAE,CAAEgB,KAAK,CAAE,OAAO,CAAEP,MAAM,CAAE,QAAS,CAAE,CAAAL,QAAA,CAAE5B,OAAO,CAAM,CAAC,CAC5EF,KAAK,eAAIX,IAAA,QAAKqC,KAAK,CAAE,CAAEgB,KAAK,CAAE,KAAK,CAAEP,MAAM,CAAE,QAAS,CAAE,CAAAL,QAAA,CAAE9B,KAAK,CAAM,CAAC,cAEvEX,IAAA,WAAQ2C,IAAI,CAAC,QAAQ,CAACW,QAAQ,CAAE7C,UAAW,CAAAgC,QAAA,CACxChC,UAAU,CAAG,eAAe,SAAAgB,MAAA,CAAWnB,YAAY,CAAE,CAChD,CAAC,EACL,CAAC,EACJ,CAAC,CAEV,CAAC,CAED,cAAe,CAAAH,oBAAoB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}