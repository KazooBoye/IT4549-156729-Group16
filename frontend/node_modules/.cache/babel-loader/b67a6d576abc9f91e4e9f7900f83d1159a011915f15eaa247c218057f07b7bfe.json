{"ast":null,"code":"import React,{useState,useEffect,useContext}from'react';import axios from'axios';import{Link}from'react-router-dom';import AuthContext from'../../contexts/AuthContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MemberWorkoutHistoryPage=()=>{const[sessions,setSessions]=useState([]);const[isLoading,setIsLoading]=useState(true);const[error,setError]=useState('');const auth=useContext(AuthContext);useEffect(()=>{const fetchHistory=async()=>{if(!auth||!auth.token){setIsLoading(false);setError(\"Vui lòng đăng nhập để xem lịch sử.\");return;}setIsLoading(true);try{const config={headers:{Authorization:\"Bearer \".concat(auth.token)}};const res=await axios.get(\"\".concat(process.env.REACT_APP_API_URL,\"/members/my-workout-history\"),config);setSessions(res.data);}catch(err){setError('Không thể tải lịch sử tập luyện.');}finally{setIsLoading(false);}};fetchHistory();},[auth]);if(isLoading)return/*#__PURE__*/_jsx(\"p\",{children:\"\\u0110ang t\\u1EA3i l\\u1ECBch s\\u1EED...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"management-page-container\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard\",className:\"btn-back-dashboard\",children:\"\\u2190 Quay l\\u1EA1i Dashboard\"}),/*#__PURE__*/_jsx(\"h2\",{style:{marginTop:'1rem'},children:\"L\\u1ECBch s\\u1EED T\\u1EADp luy\\u1EC7n\"}),/*#__PURE__*/_jsx(\"div\",{className:\"session-list\",children:sessions.length>0?sessions.map(session=>{var _session$Trainer,_session$Trainer$Prof;return/*#__PURE__*/_jsxs(\"div\",{className:\"session-item\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"session-header\",children:[/*#__PURE__*/_jsx(\"strong\",{children:new Date(session.sessionDatetime).toLocaleDateString('vi-VN')}),/*#__PURE__*/_jsx(\"span\",{className:\"status-badge status-\".concat(session.status.toLowerCase()),children:session.status})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"session-body\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Bu\\u1ED5i t\\u1EADp:\"}),\" \",session.exercisePlan]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Th\\u1EDDi l\\u01B0\\u1EE3ng:\"}),\" \",session.durationMinutes,\" ph\\xFAt\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Hu\\u1EA5n luy\\u1EC7n vi\\xEAn:\"}),\" \",((_session$Trainer=session.Trainer)===null||_session$Trainer===void 0?void 0:(_session$Trainer$Prof=_session$Trainer.Profile)===null||_session$Trainer$Prof===void 0?void 0:_session$Trainer$Prof.full_name)||'N/A']}),session.trainerNotes&&/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Ghi ch\\xFA c\\u1EE7a HLV:\"}),\" \",session.trainerNotes]}),session.evaluationScore!==null&&/*#__PURE__*/_jsxs(\"div\",{className:\"evaluation-summary\",children:[/*#__PURE__*/_jsx(\"strong\",{children:\"\\u0110\\xE1nh gi\\xE1:\"}),\" \",session.evaluationScore,\"/10 - \",session.evaluationComments]})]})]},session.session_id);}):/*#__PURE__*/_jsx(\"p\",{children:\"B\\u1EA1n ch\\u01B0a c\\xF3 bu\\u1ED5i t\\u1EADp n\\xE0o trong l\\u1ECBch s\\u1EED.\"})})]});};export default MemberWorkoutHistoryPage;","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","Link","AuthContext","jsx","_jsx","jsxs","_jsxs","MemberWorkoutHistoryPage","sessions","setSessions","isLoading","setIsLoading","error","setError","auth","fetchHistory","token","config","headers","Authorization","concat","res","get","process","env","REACT_APP_API_URL","data","err","children","style","color","className","to","marginTop","length","map","session","_session$Trainer","_session$Trainer$Prof","Date","sessionDatetime","toLocaleDateString","status","toLowerCase","exercisePlan","durationMinutes","Trainer","Profile","full_name","trainerNotes","evaluationScore","evaluationComments","session_id"],"sources":["D:/GITHUB/IT4549-156729-Group16/frontend/src/pages/Member/MemberWorkoutHistoryPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthContext from '../../contexts/AuthContext';\r\n\r\nconst MemberWorkoutHistoryPage = () => {\r\n    const [sessions, setSessions] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const  auth  = useContext(AuthContext);\r\n\r\n    useEffect(() => {\r\n        const fetchHistory = async () => {\r\n            if (!auth || !auth.token) {\r\n                setIsLoading(false);\r\n                setError(\"Vui lòng đăng nhập để xem lịch sử.\");\r\n                return;\r\n            }\r\n\r\n            setIsLoading(true);\r\n            try {\r\n                const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n                const res = await axios.get(`${process.env.REACT_APP_API_URL}/members/my-workout-history`, config);\r\n                setSessions(res.data);\r\n            } catch (err) {\r\n                setError('Không thể tải lịch sử tập luyện.');\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchHistory();\r\n    }, [auth]);\r\n\r\n    if (isLoading) return <p>Đang tải lịch sử...</p>;\r\n    if (error) return <p style={{color: 'red'}}>{error}</p>;\r\n\r\n    return (\r\n        <div className=\"management-page-container\">\r\n            <Link to=\"/dashboard\" className=\"btn-back-dashboard\">← Quay lại Dashboard</Link>\r\n            <h2 style={{marginTop: '1rem'}}>Lịch sử Tập luyện</h2>\r\n\r\n            <div className=\"session-list\">\r\n                {sessions.length > 0 ? sessions.map(session => (\r\n                    <div key={session.session_id} className=\"session-item\">\r\n                        <div className=\"session-header\">\r\n                            <strong>{new Date(session.sessionDatetime).toLocaleDateString('vi-VN')}</strong>\r\n                            <span className={`status-badge status-${session.status.toLowerCase()}`}>{session.status}</span>\r\n                        </div>\r\n                        <div className=\"session-body\">\r\n                            <p><strong>Buổi tập:</strong> {session.exercisePlan}</p>\r\n                            <p><strong>Thời lượng:</strong> {session.durationMinutes} phút</p>\r\n                            <p><strong>Huấn luyện viên:</strong> {session.Trainer?.Profile?.full_name || 'N/A'}</p>\r\n                            {session.trainerNotes && <p><strong>Ghi chú của HLV:</strong> {session.trainerNotes}</p>}\r\n                            {session.evaluationScore !== null && (\r\n                                <div className=\"evaluation-summary\">\r\n                                    <strong>Đánh giá:</strong> {session.evaluationScore}/10 - {session.evaluationComments}\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                )) : (\r\n                    <p>Bạn chưa có buổi tập nào trong lịch sử.</p>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MemberWorkoutHistoryPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}