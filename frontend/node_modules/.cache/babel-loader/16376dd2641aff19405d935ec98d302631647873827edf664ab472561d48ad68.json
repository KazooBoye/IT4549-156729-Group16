{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Scratch\\\\frontend\\\\src\\\\pages\\\\Owner\\\\UserManagementPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../../contexts/AuthContext';\n// You will need a modal component or create a simple one\n// import Modal from '../../components/Common/Modal'; \nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst UserManagementPage = () => {\n  _s();\n  const [users, setUsers] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState('');\n  const auth = useContext(AuthContext);\n\n  // State for managing add/edit form/modal\n  const [isFormVisible, setIsFormVisible] = useState(false);\n  const [isEditing, setIsEditing] = useState(false);\n  const [currentUser, setCurrentUser] = useState(null); // The user being edited\n  const [formData, setFormData] = useState({\n    fullName: '',\n    email: '',\n    password: '',\n    confirmPassword: '',\n    role: 'member',\n    phoneNumber: ''\n  });\n  const fetchUsers = async () => {\n    if (!auth || !auth.token) return;\n    setIsLoading(true);\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${auth.token}`\n        }\n      };\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/users`, config);\n      setUsers(res.data);\n    } catch (err) {\n      setError('Không thể tải danh sách người dùng.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchUsers();\n  }, [auth]);\n  const handleOpenForm = (user = null) => {\n    if (user) {\n      var _user$Profile, _user$Profile2;\n      // Editing existing user\n      setIsEditing(true);\n      setCurrentUser(user);\n      setFormData({\n        fullName: ((_user$Profile = user.Profile) === null || _user$Profile === void 0 ? void 0 : _user$Profile.full_name) || '',\n        email: user.email,\n        role: user.role,\n        phoneNumber: ((_user$Profile2 = user.Profile) === null || _user$Profile2 === void 0 ? void 0 : _user$Profile2.phone_number) || '',\n        password: '',\n        // Password fields are always cleared for security\n        confirmPassword: ''\n      });\n    } else {\n      // Adding new user\n      setIsEditing(false);\n      setCurrentUser(null);\n      setFormData({\n        fullName: '',\n        email: '',\n        password: '',\n        confirmPassword: '',\n        role: 'member',\n        phoneNumber: ''\n      });\n    }\n    setIsFormVisible(true);\n  };\n  const handleFormChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n  const handleFormSubmit = async e => {\n    e.preventDefault();\n    if (!isEditing && formData.password !== formData.confirmPassword) {\n      return alert(\"Passwords do not match!\");\n    }\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${auth.token}`\n        }\n      };\n      if (isEditing) {\n        // Update logic\n        await axios.put(`${process.env.REACT_APP_API_URL}/users/${currentUser.user_id}`, formData, config);\n        alert('User updated successfully!');\n      } else {\n        // Create logic\n        await axios.post(`${process.env.REACT_APP_API_URL}/users`, formData, config);\n        alert('User created successfully!');\n      }\n      setIsFormVisible(false);\n      fetchUsers(); // Refresh the list\n    } catch (err) {\n      var _err$response, _err$response$data;\n      alert(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.msg) || 'An error occurred.');\n    }\n  };\n  const handleResetPassword = async userId => {\n    if (window.confirm('Bạn có chắc chắn muốn đặt lại mật khẩu cho người dùng này? Mật khẩu mới sẽ được tạo ngẫu nhiên.')) {\n      try {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${auth.token}`\n          }\n        };\n        // We send an empty object {} in the body for the PUT request\n        const res = await axios.put(`${process.env.REACT_APP_API_URL}/users/${userId}/reset-password`, {}, config);\n\n        // Show the new password to the owner so they can provide it to the user\n        alert(`Đặt lại mật khẩu thành công! Mật khẩu mới là: ${res.data.newPassword}\\n\\nVui lòng cung cấp mật khẩu này cho người dùng.`);\n      } catch (err) {\n        var _err$response2, _err$response2$data;\n        alert('Đặt lại mật khẩu thất bại.');\n        console.error(\"Password reset error:\", ((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.msg) || err);\n      }\n    }\n  };\n  const handleDeleteUser = async userId => {\n    if (window.confirm('CẢNH BÁO: Bạn có chắc chắn muốn xóa vĩnh viễn người dùng này? Tất cả dữ liệu liên quan (hồ sơ, gói tập, lịch sử) cũng sẽ bị xóa.')) {\n      try {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${auth.token}`\n          }\n        };\n        await axios.delete(`${process.env.REACT_APP_API_URL}/users/${userId}`, config);\n        alert('Xóa người dùng thành công!');\n        fetchUsers(); // Refresh the user list\n      } catch (err) {\n        var _err$response3, _err$response3$data;\n        alert('Xóa người dùng thất bại.');\n        console.error(\"Delete user error:\", ((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.msg) || err);\n      }\n    }\n  };\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\u0110ang t\\u1EA3i...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 28\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      color: 'red'\n    },\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 124,\n    columnNumber: 21\n  }, this);\n\n  // This is the new, corrected render logic\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"management-page-container\",\n    children: [isFormVisible && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: isEditing ? 'Chỉnh sửa Người dùng' : 'Thêm Người dùng mới'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleFormSubmit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"H\\u1ECD t\\xEAn:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 136,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"fullName\",\n              value: formData.fullName,\n              onChange: handleFormChange,\n              placeholder: \"Full Name\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 135,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Email:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 140,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"email\",\n              type: \"email\",\n              value: formData.email,\n              onChange: handleFormChange,\n              placeholder: \"Email\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"S\\u1ED1 \\u0111i\\u1EC7n tho\\u1EA1i (t\\xF9y ch\\u1ECDn):\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              name: \"phoneNumber\",\n              type: \"tel\",\n              value: formData.phoneNumber,\n              onChange: handleFormChange,\n              placeholder: \"Phone Number\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              children: \"Vai tr\\xF2:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n              name: \"role\",\n              value: formData.role,\n              onChange: handleFormChange,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"member\",\n                children: \"Member\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"trainer\",\n                children: \"Trainer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"staff\",\n                children: \"Staff\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 152,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"owner\",\n                children: \"Owner\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 153,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 149,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 15\n          }, this), !isEditing && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"M\\u1EADt kh\\u1EA9u:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"password\",\n                type: \"password\",\n                value: formData.password,\n                onChange: handleFormChange,\n                placeholder: \"Password\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 158,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                children: \"X\\xE1c nh\\u1EADn M\\u1EADt kh\\u1EA9u:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 163,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                name: \"confirmPassword\",\n                type: \"password\",\n                value: formData.confirmPassword,\n                onChange: handleFormChange,\n                placeholder: \"Confirm Password\",\n                required: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 164,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"modal-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn-secondary\",\n              onClick: () => setIsFormVisible(false),\n              children: \"H\\u1EE7y b\\u1ECF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn-primary\",\n              children: isEditing ? 'Cập nhật' : 'Tạo Người dùng'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 170,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/dashboard\",\n      className: \"btn-back-dashboard\",\n      children: \"\\u2190 Quay l\\u1EA1i Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Qu\\u1EA3n l\\xFD Ng\\u01B0\\u1EDDi d\\xF9ng H\\u1EC7 th\\u1ED1ng\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"btn-add-new\",\n        onClick: () => handleOpenForm(),\n        children: \"Th\\xEAm Ng\\u01B0\\u1EDDi d\\xF9ng m\\u1EDBi\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"table-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"data-table\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"ID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"T\\xEAn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"Vai tr\\xF2\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              children: \"H\\xE0nh \\u0111\\u1ED9ng\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          children: users.length > 0 ? users.map(user => {\n            var _user$Profile3;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                children: user.user_id\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: ((_user$Profile3 = user.Profile) === null || _user$Profile3 === void 0 ? void 0 : _user$Profile3.full_name) || 'N/A'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 200,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: user.email\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: `status-badge status-${user.role}`,\n                  children: user.role\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"action-buttons\",\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-edit\",\n                  onClick: () => handleOpenForm(user),\n                  children: \"S\\u1EEDa\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-action btn-missed\",\n                  onClick: () => handleResetPassword(user.user_id),\n                  children: \"Reset Pass\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn-delete\",\n                  onClick: () => handleDeleteUser(user.user_id),\n                  children: \"X\\xF3a\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 19\n              }, this)]\n            }, user.user_id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 197,\n              columnNumber: 17\n            }, this);\n          }) : /*#__PURE__*/_jsxDEV(\"tr\", {\n            children: /*#__PURE__*/_jsxDEV(\"td\", {\n              colSpan: \"5\",\n              className: \"no-data-cell\",\n              children: \"Kh\\xF4ng c\\xF3 ng\\u01B0\\u1EDDi d\\xF9ng n\\xE0o trong h\\u1EC7 th\\u1ED1ng.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 184,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 128,\n    columnNumber: 5\n  }, this);\n};\n_s(UserManagementPage, \"wJygOZsLsxmtJ69OMVMgZkbATe4=\");\n_c = UserManagementPage;\nexport default UserManagementPage;\nvar _c;\n$RefreshReg$(_c, \"UserManagementPage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","Link","AuthContext","jsxDEV","_jsxDEV","Fragment","_Fragment","UserManagementPage","_s","users","setUsers","isLoading","setIsLoading","error","setError","auth","isFormVisible","setIsFormVisible","isEditing","setIsEditing","currentUser","setCurrentUser","formData","setFormData","fullName","email","password","confirmPassword","role","phoneNumber","fetchUsers","token","config","headers","Authorization","res","get","process","env","REACT_APP_API_URL","data","err","handleOpenForm","user","_user$Profile","_user$Profile2","Profile","full_name","phone_number","handleFormChange","e","target","name","value","handleFormSubmit","preventDefault","alert","put","user_id","post","_err$response","_err$response$data","response","msg","handleResetPassword","userId","window","confirm","newPassword","_err$response2","_err$response2$data","console","handleDeleteUser","delete","_err$response3","_err$response3$data","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","className","onSubmit","onChange","placeholder","required","type","onClick","to","length","map","_user$Profile3","colSpan","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Scratch/frontend/src/pages/Owner/UserManagementPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthContext from '../../contexts/AuthContext';\r\n// You will need a modal component or create a simple one\r\n// import Modal from '../../components/Common/Modal'; \r\n\r\nconst UserManagementPage = () => {\r\n    const [users, setUsers] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n    const [error, setError] = useState('');\r\n    const  auth  = useContext(AuthContext);\r\n\r\n    // State for managing add/edit form/modal\r\n    const [isFormVisible, setIsFormVisible] = useState(false);\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [currentUser, setCurrentUser] = useState(null); // The user being edited\r\n    const [formData, setFormData] = useState({\r\n        fullName: '',\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        role: 'member',\r\n        phoneNumber: ''\r\n    });\r\n\r\n    const fetchUsers = async () => {\r\n        if (!auth || !auth.token) return;\r\n        setIsLoading(true);\r\n        try {\r\n            const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/users`, config);\r\n            setUsers(res.data);\r\n        } catch (err) {\r\n            setError('Không thể tải danh sách người dùng.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        fetchUsers();\r\n    }, [auth]);\r\n\r\n    const handleOpenForm = (user = null) => {\r\n        if (user) { // Editing existing user\r\n            setIsEditing(true);\r\n            setCurrentUser(user);\r\n            setFormData({\r\n                fullName: user.Profile?.full_name || '',\r\n                email: user.email,\r\n                role: user.role,\r\n                phoneNumber: user.Profile?.phone_number || '',\r\n                password: '', // Password fields are always cleared for security\r\n                confirmPassword: ''\r\n            });\r\n        } else { // Adding new user\r\n            setIsEditing(false);\r\n            setCurrentUser(null);\r\n            setFormData({ fullName: '', email: '', password: '', confirmPassword: '', role: 'member', phoneNumber: ''});\r\n        }\r\n        setIsFormVisible(true);\r\n    };\r\n\r\n    const handleFormChange = (e) => {\r\n        setFormData({...formData, [e.target.name]: e.target.value});\r\n    };\r\n\r\n    const handleFormSubmit = async (e) => {\r\n        e.preventDefault();\r\n        if (!isEditing && formData.password !== formData.confirmPassword) {\r\n            return alert(\"Passwords do not match!\");\r\n        }\r\n        \r\n        try {\r\n            const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n            if (isEditing) { // Update logic\r\n                await axios.put(`${process.env.REACT_APP_API_URL}/users/${currentUser.user_id}`, formData, config);\r\n                alert('User updated successfully!');\r\n            } else { // Create logic\r\n                await axios.post(`${process.env.REACT_APP_API_URL}/users`, formData, config);\r\n                alert('User created successfully!');\r\n            }\r\n            setIsFormVisible(false);\r\n            fetchUsers(); // Refresh the list\r\n        } catch (err) {\r\n            alert(err.response?.data?.msg || 'An error occurred.');\r\n        }\r\n    };\r\n\r\n    const handleResetPassword = async (userId) => {\r\n        if (window.confirm('Bạn có chắc chắn muốn đặt lại mật khẩu cho người dùng này? Mật khẩu mới sẽ được tạo ngẫu nhiên.')) {\r\n            try {\r\n                const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n                // We send an empty object {} in the body for the PUT request\r\n                const res = await axios.put(`${process.env.REACT_APP_API_URL}/users/${userId}/reset-password`, {}, config);\r\n                \r\n                // Show the new password to the owner so they can provide it to the user\r\n                alert(`Đặt lại mật khẩu thành công! Mật khẩu mới là: ${res.data.newPassword}\\n\\nVui lòng cung cấp mật khẩu này cho người dùng.`);\r\n            } catch (err) {\r\n                alert('Đặt lại mật khẩu thất bại.');\r\n                console.error(\"Password reset error:\", err.response?.data?.msg || err);\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleDeleteUser = async (userId) => {\r\n        if (window.confirm('CẢNH BÁO: Bạn có chắc chắn muốn xóa vĩnh viễn người dùng này? Tất cả dữ liệu liên quan (hồ sơ, gói tập, lịch sử) cũng sẽ bị xóa.')) {\r\n            try {\r\n                const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n                await axios.delete(`${process.env.REACT_APP_API_URL}/users/${userId}`, config);\r\n                \r\n                alert('Xóa người dùng thành công!');\r\n                fetchUsers(); // Refresh the user list\r\n            } catch (err) {\r\n                alert('Xóa người dùng thất bại.');\r\n                console.error(\"Delete user error:\", err.response?.data?.msg || err);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n     if (isLoading) return <p>Đang tải...</p>;\r\n  if (error) return <p style={{color: 'red'}}>{error}</p>;\r\n\r\n  // This is the new, corrected render logic\r\n  return (\r\n    <div className=\"management-page-container\">\r\n      {/* The modal for adding/editing will be controlled by this state */}\r\n      {isFormVisible && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal-content\">\r\n            <h2>{isEditing ? 'Chỉnh sửa Người dùng' : 'Thêm Người dùng mới'}</h2>\r\n            <form onSubmit={handleFormSubmit}>\r\n              <div className=\"form-group\">\r\n                <label>Họ tên:</label>\r\n                <input name=\"fullName\" value={formData.fullName} onChange={handleFormChange} placeholder=\"Full Name\" required />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Email:</label>\r\n                <input name=\"email\" type=\"email\" value={formData.email} onChange={handleFormChange} placeholder=\"Email\" required />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Số điện thoại (tùy chọn):</label>\r\n                <input name=\"phoneNumber\" type=\"tel\" value={formData.phoneNumber} onChange={handleFormChange} placeholder=\"Phone Number\" />\r\n              </div>\r\n              <div className=\"form-group\">\r\n                <label>Vai trò:</label>\r\n                <select name=\"role\" value={formData.role} onChange={handleFormChange}>\r\n                  <option value=\"member\">Member</option>\r\n                  <option value=\"trainer\">Trainer</option>\r\n                  <option value=\"staff\">Staff</option>\r\n                  <option value=\"owner\">Owner</option>\r\n                </select>\r\n              </div>\r\n              {!isEditing && (\r\n                <>\r\n                  <div className=\"form-group\">\r\n                    <label>Mật khẩu:</label>\r\n                    <input name=\"password\" type=\"password\" value={formData.password} onChange={handleFormChange} placeholder=\"Password\" required />\r\n                  </div>\r\n                  <div className=\"form-group\">\r\n                    <label>Xác nhận Mật khẩu:</label>\r\n                    <input name=\"confirmPassword\" type=\"password\" value={formData.confirmPassword} onChange={handleFormChange} placeholder=\"Confirm Password\" required />\r\n                  </div>\r\n                </>\r\n              )}\r\n              <div className=\"modal-actions\">\r\n                <button type=\"button\" className=\"btn-secondary\" onClick={() => setIsFormVisible(false)}>Hủy bỏ</button>\r\n                <button type=\"submit\" className=\"btn-primary\">{isEditing ? 'Cập nhật' : 'Tạo Người dùng'}</button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n\r\n      {/* Main Page Content */}\r\n      <Link to=\"/dashboard\" className=\"btn-back-dashboard\">← Quay lại Dashboard</Link>\r\n      <div className=\"page-header\">\r\n        <h2>Quản lý Người dùng Hệ thống</h2>\r\n        <button className=\"btn-add-new\" onClick={() => handleOpenForm()}>Thêm Người dùng mới</button>\r\n      </div>\r\n      <div className=\"table-wrapper\">\r\n        <table className=\"data-table\">\r\n          <thead>\r\n            <tr>\r\n              <th>ID</th>\r\n              <th>Tên</th>\r\n              <th>Email</th>\r\n              <th>Vai trò</th>\r\n              <th>Hành động</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {users.length > 0 ? (\r\n              users.map(user => (\r\n                <tr key={user.user_id}>\r\n                  <td>{user.user_id}</td>\r\n                  {/* FIX: Correctly access nested Profile data with optional chaining */}\r\n                  <td>{user.Profile?.full_name || 'N/A'}</td>\r\n                  <td>{user.email}</td>\r\n                  <td>\r\n                    {/* Use a styled badge for the role */}\r\n                    <span className={`status-badge status-${user.role}`}>{user.role}</span>\r\n                  </td>\r\n                  <td className=\"action-buttons\">\r\n                    <button className=\"btn-edit\" onClick={() => handleOpenForm(user)}>Sửa</button>\r\n                    <button className=\"btn-action btn-missed\" onClick={() => handleResetPassword(user.user_id)}>Reset Pass</button>\r\n                    <button className=\"btn-delete\" onClick={() => handleDeleteUser(user.user_id)}>Xóa</button>\r\n                  </td>\r\n                </tr>\r\n              ))\r\n            ) : (\r\n              <tr>\r\n                <td colSpan=\"5\" className=\"no-data-cell\">Không có người dùng nào trong hệ thống.</td>\r\n              </tr>\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagementPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}