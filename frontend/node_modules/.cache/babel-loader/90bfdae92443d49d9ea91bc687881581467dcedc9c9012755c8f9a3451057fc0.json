{"ast":null,"code":"var _jsxFileName = \"D:\\\\GITHUB\\\\IT4549-156729-Group16\\\\frontend\\\\src\\\\pages\\\\Member\\\\MemberPaymentPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport SimulatedPaymentForm from './SimulatedPaymentForm'; // Import the new component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MemberPaymentPage = () => {\n  _s();\n  // State for data fetched from the backend\n  const [packages, setPackages] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // State for user interaction\n  const [selectedPackageId, setSelectedPackageId] = useState('');\n\n  // State for showing top-level feedback\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  // Fetch active packages from the backend when the component mounts\n  useEffect(() => {\n    const fetchPackages = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/packages`);\n        setPackages(response.data);\n        // Automatically select the first package if available\n        if (response.data.length > 0) {\n          setSelectedPackageId(response.data[0].package_id);\n        }\n      } catch (err) {\n        setError('Could not load membership packages. Please try again later.');\n        console.error('Fetch packages error:', err);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    fetchPackages();\n  }, []);\n\n  // Find the full object for the selected package\n  const selectedPackage = packages.find(pkg => pkg.package_id === selectedPackageId);\n  const handlePaymentSuccess = data => {\n    setSuccess(`Successfully subscribed to ${selectedPackage === null || selectedPackage === void 0 ? void 0 : selectedPackage.package_name}!`);\n    setError('');\n    // Optionally, you could navigate the user away or refresh their subscription data\n  };\n  const handlePaymentError = errorMessage => {\n    setError(errorMessage);\n    setSuccess('');\n  };\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading packages...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Thanh to\\xE1n G\\xF3i t\\u1EADp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'red',\n        border: '1px solid red',\n        padding: '10px'\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this), success && /*#__PURE__*/_jsxDEV(\"p\", {\n      style: {\n        color: 'green',\n        border: '1px solid green',\n        padding: '10px'\n      },\n      children: success\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: '2rem'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"packageSelect\",\n        children: \"Ch\\u1ECDn G\\xF3i t\\u1EADp:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"packageSelect\",\n        value: selectedPackageId,\n        onChange: e => setSelectedPackageId(Number(e.target.value)) // Convert value to Number\n        ,\n        required: true,\n        children: packages.map(pkg => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: pkg.package_id,\n          children: [pkg.package_name, \" - \", Number(pkg.price).toLocaleString(), \" VND\"]\n        }, pkg.package_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }, this), selectedPackage ? /*#__PURE__*/_jsxDEV(SimulatedPaymentForm\n    // Pass the necessary props to the child component\n    , {\n      packageId: selectedPackage.package_id,\n      packagePrice: selectedPackage.price,\n      onPaymentSuccess: handlePaymentSuccess,\n      onPaymentError: handlePaymentError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Please select a package to see payment options.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(MemberPaymentPage, \"lPOKTCjvaty/nK6yNVNl0J7hzYY=\");\n_c = MemberPaymentPage;\nexport default MemberPaymentPage;\nvar _c;\n$RefreshReg$(_c, \"MemberPaymentPage\");","map":{"version":3,"names":["React","useState","useEffect","axios","SimulatedPaymentForm","jsxDEV","_jsxDEV","MemberPaymentPage","_s","packages","setPackages","isLoading","setIsLoading","selectedPackageId","setSelectedPackageId","error","setError","success","setSuccess","fetchPackages","response","get","process","env","REACT_APP_API_URL","data","length","package_id","err","console","selectedPackage","find","pkg","handlePaymentSuccess","package_name","handlePaymentError","errorMessage","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","border","padding","marginBottom","htmlFor","id","value","onChange","e","Number","target","required","map","price","toLocaleString","packageId","packagePrice","onPaymentSuccess","onPaymentError","_c","$RefreshReg$"],"sources":["D:/GITHUB/IT4549-156729-Group16/frontend/src/pages/Member/MemberPaymentPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport SimulatedPaymentForm from './SimulatedPaymentForm'; // Import the new component\r\n\r\nconst MemberPaymentPage = () => {\r\n  // State for data fetched from the backend\r\n  const [packages, setPackages] = useState([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  // State for user interaction\r\n  const [selectedPackageId, setSelectedPackageId] = useState('');\r\n\r\n  // State for showing top-level feedback\r\n  const [error, setError] = useState('');\r\n  const [success, setSuccess] = useState('');\r\n\r\n  // Fetch active packages from the backend when the component mounts\r\n  useEffect(() => {\r\n    const fetchPackages = async () => {\r\n      try {\r\n        const response = await axios.get(`${process.env.REACT_APP_API_URL}/packages`);\r\n        setPackages(response.data);\r\n        // Automatically select the first package if available\r\n        if (response.data.length > 0) {\r\n          setSelectedPackageId(response.data[0].package_id);\r\n        }\r\n      } catch (err) {\r\n        setError('Could not load membership packages. Please try again later.');\r\n        console.error('Fetch packages error:', err);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchPackages();\r\n  }, []);\r\n\r\n  // Find the full object for the selected package\r\n  const selectedPackage = packages.find(\r\n    (pkg) => pkg.package_id === selectedPackageId\r\n  );\r\n\r\n  const handlePaymentSuccess = (data) => {\r\n    setSuccess(`Successfully subscribed to ${selectedPackage?.package_name}!`);\r\n    setError('');\r\n    // Optionally, you could navigate the user away or refresh their subscription data\r\n  };\r\n\r\n  const handlePaymentError = (errorMessage) => {\r\n    setError(errorMessage);\r\n    setSuccess('');\r\n  };\r\n\r\n  if (isLoading) {\r\n    return <div>Loading packages...</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h2>Thanh toán Gói tập</h2>\r\n      {/* Display top-level success/error messages here */}\r\n      {error && <p style={{ color: 'red', border: '1px solid red', padding: '10px' }}>{error}</p>}\r\n      {success && <p style={{ color: 'green', border: '1px solid green', padding: '10px' }}>{success}</p>}\r\n\r\n      <div style={{ marginBottom: '2rem' }}>\r\n        <label htmlFor=\"packageSelect\">Chọn Gói tập:</label>\r\n        <select\r\n          id=\"packageSelect\"\r\n          value={selectedPackageId}\r\n          onChange={(e) => setSelectedPackageId(Number(e.target.value))} // Convert value to Number\r\n          required\r\n        >\r\n          {packages.map((pkg) => (\r\n            <option key={pkg.package_id} value={pkg.package_id}>\r\n              {pkg.package_name} - {Number(pkg.price).toLocaleString()} VND\r\n            </option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n\r\n      {/* --- Integration of the Simulated Payment Form --- */}\r\n      {/* Only show the payment form if a package has been selected */}\r\n      {selectedPackage ? (\r\n        <SimulatedPaymentForm\r\n          // Pass the necessary props to the child component\r\n          packageId={selectedPackage.package_id}\r\n          packagePrice={selectedPackage.price}\r\n          onPaymentSuccess={handlePaymentSuccess}\r\n          onPaymentError={handlePaymentError}\r\n        />\r\n      ) : (\r\n        <p>Please select a package to see payment options.</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MemberPaymentPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}