{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Scratch\\\\frontend\\\\src\\\\pages\\\\Trainer\\\\EvaluateWorkoutPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useContext } from 'react';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport AuthContext from '../../contexts/AuthContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EvaluateWorkoutPage = () => {\n  _s();\n  // --- State for the main workflow ---\n  const [members, setMembers] = useState([]);\n  const [selectedMember, setSelectedMember] = useState(null);\n  const [sessions, setSessions] = useState([]);\n  const [sessionToEvaluate, setSessionToEvaluate] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState('');\n  const auth = useContext(AuthContext);\n\n  // --- State for the evaluation form itself ---\n  const [evaluationData, setEvaluationData] = useState({\n    evaluationScore: 5,\n    evaluationComments: '',\n    goalCompletionStatus: 'Met',\n    suggestionsForNextSession: ''\n  });\n\n  // --- Step 1 & 2: Fetch the trainer's assigned members ---\n  // This useEffect will fetch the trainer's assigned members\n  useEffect(() => {\n    // Define the async function inside the effect\n    const fetchAssignedMembers = async () => {\n      // This is the crucial check. If the auth token isn't ready, we stop.\n      if (!auth || !auth.token) {\n        // We set loading to false to ensure the UI doesn't get stuck.\n        setIsLoading(false);\n        // We can set an error to be more user-friendly.\n        // setError('Could not verify authentication. Please log in again.');\n        return;\n      }\n\n      // If we have a token, we can now safely proceed.\n      setIsLoading(true);\n      setError('');\n      try {\n        const config = {\n          headers: {\n            Authorization: `Bearer ${auth.token}`\n          }\n        };\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/trainer/my-members`, config);\n        setMembers(res.data);\n      } catch (err) {\n        setError('Không thể tải danh sách hội viên.');\n        console.error(\"Error fetching assigned members:\", err);\n      } finally {\n        // This always runs, ensuring the \"Loading...\" message is removed.\n        setIsLoading(false);\n      }\n    };\n    fetchAssignedMembers();\n  }, [auth]); // The dependency on `auth` is what makes this work.\n\n  // --- Step 3 & 4: Handle member selection and fetch their sessions ---\n  const handleMemberSelect = async member => {\n    setSelectedMember(member);\n    setIsLoading(true);\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${auth.token}`\n        }\n      };\n      const res = await axios.get(`${process.env.REACT_APP_API_URL}/trainer/member/${member.user_id}/sessions`, config);\n      // Filter to only show sessions that can be evaluated\n      setSessions(res.data.filter(s => s.status === 'Completed'));\n    } catch (err) {\n      setError('Không thể tải lịch tập của học viên này.');\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  // --- Step 5, 6, 7: Handle session selection and prepare the evaluation form ---\n  const handleOpenEvaluation = session => {\n    setSessionToEvaluate(session);\n    setEvaluationData({\n      evaluationScore: session.evaluationScore || 5,\n      evaluationComments: session.evaluationComments || '',\n      goalCompletionStatus: session.goalCompletionStatus || 'Met',\n      suggestionsForNextSession: session.suggestionsForNextSession || ''\n    });\n  };\n\n  // --- Step 8 & 9: Handle submission of the evaluation form ---\n  const handleEvaluationSubmit = async e => {\n    e.preventDefault();\n    try {\n      const config = {\n        headers: {\n          Authorization: `Bearer ${auth.token}`\n        }\n      };\n      await axios.put(`${process.env.REACT_APP_API_URL}/trainer/sessions/${sessionToEvaluate.session_id}`, evaluationData, config);\n      alert('Đánh giá thành công!');\n      setSessionToEvaluate(null); // Go back to the session list\n      handleMemberSelect(selectedMember); // Refresh the list\n    } catch (err) {\n      alert('Đánh giá thất bại.');\n    }\n  };\n\n  // --- RENDER LOGIC ---\n\n  if (isLoading) return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"\\u0110ang t\\u1EA3i...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 27\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"p\", {\n    style: {\n      color: 'red'\n    },\n    children: error\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 23\n  }, this);\n\n  // --- Render the evaluation form itself ---\n  if (sessionToEvaluate) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"management-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSessionToEvaluate(null),\n        children: \"\\u2190 Quay l\\u1EA1i danh s\\xE1ch bu\\u1ED5i t\\u1EADp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"\\u0110\\xE1nh gi\\xE1 bu\\u1ED5i t\\u1EADp: \", new Date(sessionToEvaluate.sessionDatetime).toLocaleString('vi-VN')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleEvaluationSubmit,\n        className: \"edit-form\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: [\"\\u0110i\\u1EC3m \\u0111\\xE1nh gi\\xE1 (0-10): \", evaluationData.evaluationScore]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: \"10\",\n            value: evaluationData.evaluationScore,\n            onChange: e => setEvaluationData({\n              ...evaluationData,\n              evaluationScore: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 113,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Nh\\u1EADn x\\xE9t chuy\\xEAn m\\xF4n:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            value: evaluationData.evaluationComments,\n            onChange: e => setEvaluationData({\n              ...evaluationData,\n              evaluationComments: e.target.value\n            }),\n            required: true,\n            rows: \"4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 117,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"M\\u1EE9c \\u0111\\u1ED9 ho\\xE0n th\\xE0nh m\\u1EE5c ti\\xEAu:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: evaluationData.goalCompletionStatus,\n            onChange: e => setEvaluationData({\n              ...evaluationData,\n              goalCompletionStatus: e.target.value\n            }),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Met\",\n              children: \"\\u0110\\u1EA1t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Exceeded\",\n              children: \"V\\u01B0\\u1EE3t mong \\u0111\\u1EE3i\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"Not Met\",\n              children: \"Ch\\u01B0a \\u0111\\u1EA1t\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 121,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"\\u0110\\u1EC1 xu\\u1EA5t c\\u1EA3i thi\\u1EC7n cho bu\\u1ED5i sau:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: evaluationData.suggestionsForNextSession,\n            onChange: e => setEvaluationData({\n              ...evaluationData,\n              suggestionsForNextSession: e.target.value\n            })\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"L\\u01B0u \\u0110\\xE1nh gi\\xE1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 13\n    }, this);\n  }\n\n  // --- Render the list of sessions for the selected member ---\n  if (selectedMember) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"management-page-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setSelectedMember(null),\n        children: \"\\u2190 Ch\\u1ECDn h\\u1ECDc vi\\xEAn kh\\xE1c\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: [\"Ch\\u1ECDn bu\\u1ED5i t\\u1EADp \\u0111\\u1EC3 \\u0111\\xE1nh gi\\xE1 cho: \", selectedMember.Profile.full_name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 18\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"session-list\",\n        children: sessions.length > 0 ? sessions.map(session => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"session-item\",\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Ng\\xE0y:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 146,\n              columnNumber: 32\n            }, this), \" \", new Date(session.sessionDatetime).toLocaleString('vi-VN')]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"N\\u1ED9i dung:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 147,\n              columnNumber: 32\n            }, this), \" \", session.exercisePlan]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 147,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn-edit\",\n            onClick: () => handleOpenEvaluation(session),\n            children: session.evaluationScore !== null ? 'Sửa Đánh giá' : 'Thêm Đánh giá'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 148,\n            columnNumber: 29\n          }, this)]\n        }, session.session_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 25\n        }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"H\\u1ECDc vi\\xEAn n\\xE0y ch\\u01B0a c\\xF3 bu\\u1ED5i t\\u1EADp n\\xE0o \\u0111\\xE3 \\\"Ho\\xE0n th\\xE0nh\\\" \\u0111\\u1EC3 \\u0111\\xE1nh gi\\xE1.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 26\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 18\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }, this);\n  }\n\n  // --- Render the initial list of members ---\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"management-page-container\",\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/dashboard\",\n      children: \"\\u2190 Quay l\\u1EA1i Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      style: {\n        marginTop: '1rem'\n      },\n      children: \"\\u0110\\xE1nh gi\\xE1 K\\u1EBFt qu\\u1EA3 Luy\\u1EC7n t\\u1EADp\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: \"Vui l\\xF2ng ch\\u1ECDn m\\u1ED9t h\\u1ECDc vi\\xEAn:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"member-selection-list\",\n      children: members.map(member => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleMemberSelect(member),\n        className: \"member-select-button\",\n        children: member.Profile.full_name\n      }, member.user_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 160,\n    columnNumber: 9\n  }, this);\n};\n_s(EvaluateWorkoutPage, \"VNtHkebxocsVlcfj6V1aWKB068k=\");\n_c = EvaluateWorkoutPage;\nexport default EvaluateWorkoutPage;\nvar _c;\n$RefreshReg$(_c, \"EvaluateWorkoutPage\");","map":{"version":3,"names":["React","useState","useEffect","useContext","axios","Link","AuthContext","jsxDEV","_jsxDEV","EvaluateWorkoutPage","_s","members","setMembers","selectedMember","setSelectedMember","sessions","setSessions","sessionToEvaluate","setSessionToEvaluate","isLoading","setIsLoading","error","setError","auth","evaluationData","setEvaluationData","evaluationScore","evaluationComments","goalCompletionStatus","suggestionsForNextSession","fetchAssignedMembers","token","config","headers","Authorization","res","get","process","env","REACT_APP_API_URL","data","err","console","handleMemberSelect","member","user_id","filter","s","status","handleOpenEvaluation","session","handleEvaluationSubmit","e","preventDefault","put","session_id","alert","children","fileName","_jsxFileName","lineNumber","columnNumber","style","color","className","onClick","Date","sessionDatetime","toLocaleString","onSubmit","type","min","max","value","onChange","target","required","rows","Profile","full_name","length","map","exercisePlan","to","marginTop","_c","$RefreshReg$"],"sources":["C:/Users/Admin/Scratch/frontend/src/pages/Trainer/EvaluateWorkoutPage.jsx"],"sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport AuthContext from '../../contexts/AuthContext';\r\n\r\nconst EvaluateWorkoutPage = () => {\r\n    // --- State for the main workflow ---\r\n    const [members, setMembers] = useState([]);\r\n    const [selectedMember, setSelectedMember] = useState(null);\r\n    const [sessions, setSessions] = useState([]);\r\n    const [sessionToEvaluate, setSessionToEvaluate] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const  auth  = useContext(AuthContext);\r\n\r\n    // --- State for the evaluation form itself ---\r\n    const [evaluationData, setEvaluationData] = useState({\r\n        evaluationScore: 5,\r\n        evaluationComments: '',\r\n        goalCompletionStatus: 'Met',\r\n        suggestionsForNextSession: ''\r\n    });\r\n\r\n    // --- Step 1 & 2: Fetch the trainer's assigned members ---\r\n      // This useEffect will fetch the trainer's assigned members\r\n  useEffect(() => {\r\n    // Define the async function inside the effect\r\n    const fetchAssignedMembers = async () => {\r\n      // This is the crucial check. If the auth token isn't ready, we stop.\r\n      if (!auth || !auth.token) {\r\n        // We set loading to false to ensure the UI doesn't get stuck.\r\n        setIsLoading(false);\r\n        // We can set an error to be more user-friendly.\r\n        // setError('Could not verify authentication. Please log in again.');\r\n        return;\r\n      }\r\n\r\n      // If we have a token, we can now safely proceed.\r\n      setIsLoading(true);\r\n      setError('');\r\n\r\n      try {\r\n        const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n        const res = await axios.get(`${process.env.REACT_APP_API_URL}/trainer/my-members`, config);\r\n        setMembers(res.data);\r\n      } catch (err) {\r\n        setError('Không thể tải danh sách hội viên.');\r\n        console.error(\"Error fetching assigned members:\", err);\r\n      } finally {\r\n        // This always runs, ensuring the \"Loading...\" message is removed.\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchAssignedMembers();\r\n  }, [auth]); // The dependency on `auth` is what makes this work.\r\n\r\n    // --- Step 3 & 4: Handle member selection and fetch their sessions ---\r\n    const handleMemberSelect = async (member) => {\r\n        setSelectedMember(member);\r\n        setIsLoading(true);\r\n        try {\r\n            const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n            const res = await axios.get(`${process.env.REACT_APP_API_URL}/trainer/member/${member.user_id}/sessions`, config);\r\n            // Filter to only show sessions that can be evaluated\r\n            setSessions(res.data.filter(s => s.status === 'Completed'));\r\n        } catch(err) {\r\n            setError('Không thể tải lịch tập của học viên này.');\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    // --- Step 5, 6, 7: Handle session selection and prepare the evaluation form ---\r\n    const handleOpenEvaluation = (session) => {\r\n        setSessionToEvaluate(session);\r\n        setEvaluationData({\r\n            evaluationScore: session.evaluationScore || 5,\r\n            evaluationComments: session.evaluationComments || '',\r\n            goalCompletionStatus: session.goalCompletionStatus || 'Met',\r\n            suggestionsForNextSession: session.suggestionsForNextSession || ''\r\n        });\r\n    };\r\n\r\n    // --- Step 8 & 9: Handle submission of the evaluation form ---\r\n    const handleEvaluationSubmit = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const config = { headers: { Authorization: `Bearer ${auth.token}` } };\r\n            await axios.put(`${process.env.REACT_APP_API_URL}/trainer/sessions/${sessionToEvaluate.session_id}`, evaluationData, config);\r\n            alert('Đánh giá thành công!');\r\n            setSessionToEvaluate(null); // Go back to the session list\r\n            handleMemberSelect(selectedMember); // Refresh the list\r\n        } catch (err) {\r\n            alert('Đánh giá thất bại.');\r\n        }\r\n    };\r\n\r\n    // --- RENDER LOGIC ---\r\n\r\n    if (isLoading) return <p>Đang tải...</p>;\r\n    if (error) return <p style={{color: 'red'}}>{error}</p>;\r\n\r\n    // --- Render the evaluation form itself ---\r\n    if (sessionToEvaluate) {\r\n        return (\r\n            <div className=\"management-page-container\">\r\n                <button onClick={() => setSessionToEvaluate(null)}>← Quay lại danh sách buổi tập</button>\r\n                <h3>Đánh giá buổi tập: {new Date(sessionToEvaluate.sessionDatetime).toLocaleString('vi-VN')}</h3>\r\n                <form onSubmit={handleEvaluationSubmit} className=\"edit-form\">\r\n                    <div>\r\n                        <label>Điểm đánh giá (0-10): {evaluationData.evaluationScore}</label>\r\n                        <input type=\"range\" min=\"0\" max=\"10\" value={evaluationData.evaluationScore} onChange={e => setEvaluationData({...evaluationData, evaluationScore: e.target.value})} />\r\n                    </div>\r\n                    <div>\r\n                        <label>Nhận xét chuyên môn:</label>\r\n                        <textarea value={evaluationData.evaluationComments} onChange={e => setEvaluationData({...evaluationData, evaluationComments: e.target.value})} required rows=\"4\"></textarea>\r\n                    </div>\r\n                    <div>\r\n                        <label>Mức độ hoàn thành mục tiêu:</label>\r\n                        <select value={evaluationData.goalCompletionStatus} onChange={e => setEvaluationData({...evaluationData, goalCompletionStatus: e.target.value})}>\r\n                            <option value=\"Met\">Đạt</option>\r\n                            <option value=\"Exceeded\">Vượt mong đợi</option>\r\n                            <option value=\"Not Met\">Chưa đạt</option>\r\n                        </select>\r\n                    </div>\r\n                    <div>\r\n                        <label>Đề xuất cải thiện cho buổi sau:</label>\r\n                        <input type=\"text\" value={evaluationData.suggestionsForNextSession} onChange={e => setEvaluationData({...evaluationData, suggestionsForNextSession: e.target.value})} />\r\n                    </div>\r\n                    <button type=\"submit\">Lưu Đánh giá</button>\r\n                </form>\r\n            </div>\r\n        )\r\n    }\r\n    \r\n    // --- Render the list of sessions for the selected member ---\r\n    if (selectedMember) {\r\n        return (\r\n            <div className=\"management-page-container\">\r\n                 <button onClick={() => setSelectedMember(null)}>← Chọn học viên khác</button>\r\n                 <h3>Chọn buổi tập để đánh giá cho: {selectedMember.Profile.full_name}</h3>\r\n                 <div className=\"session-list\">\r\n                    {sessions.length > 0 ? sessions.map(session => (\r\n                        <div key={session.session_id} className=\"session-item\">\r\n                            <p><strong>Ngày:</strong> {new Date(session.sessionDatetime).toLocaleString('vi-VN')}</p>\r\n                            <p><strong>Nội dung:</strong> {session.exercisePlan}</p>\r\n                            <button className=\"btn-edit\" onClick={() => handleOpenEvaluation(session)}>\r\n                                {session.evaluationScore !== null ? 'Sửa Đánh giá' : 'Thêm Đánh giá'}\r\n                            </button>\r\n                        </div>\r\n                    )) : <p>Học viên này chưa có buổi tập nào đã \"Hoàn thành\" để đánh giá.</p>}\r\n                 </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // --- Render the initial list of members ---\r\n    return (\r\n        <div className=\"management-page-container\">\r\n            <Link to=\"/dashboard\">← Quay lại Dashboard</Link>\r\n            <h2 style={{marginTop: '1rem'}}>Đánh giá Kết quả Luyện tập</h2>\r\n            <h4>Vui lòng chọn một học viên:</h4>\r\n            <div className=\"member-selection-list\">\r\n                {members.map(member => (\r\n                    <button key={member.user_id} onClick={() => handleMemberSelect(member)} className=\"member-select-button\">\r\n                        {member.Profile.full_name}\r\n                    </button>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default EvaluateWorkoutPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}